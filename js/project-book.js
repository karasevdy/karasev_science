function toggleTocSection(header){const section=header.parentElement;section.classList.toggle('active')}
function searchTOC(){const input=document.getElementById('toc-search-input').value.toLowerCase();const items=document.querySelectorAll('.toc-link');items.forEach(item=>{const text=item.textContent.toLowerCase();item.parentElement.style.display=text.includes(input)?'block':'none'})}
document.addEventListener('DOMContentLoaded',()=>{const links=document.querySelectorAll('.toc-link');links.forEach(link=>{link.addEventListener('click',function(e){e.preventDefault();links.forEach(l=>l.classList.remove('active'));this.classList.add('active');const target=document.querySelector(this.getAttribute('href'));if(target){target.scrollIntoView({behavior:'smooth',block:'start'})}})});const sections=document.querySelectorAll('.content-section');const observer=new IntersectionObserver((entries)=>{entries.forEach(entry=>{if(entry.isIntersecting){const id=entry.target.getAttribute('id');links.forEach(link=>{link.classList.remove('active');if(link.getAttribute('href')==='#'+id){link.classList.add('active')}})}})},{rootMargin:'-20% 0px -70% 0px'});sections.forEach(section=>observer.observe(section))});
